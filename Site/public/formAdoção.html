<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Poppins&display=swap" rel="stylesheet" />
    <link href="css/formAdoção.css" rel="stylesheet">
    <link href="css\template.css" rel="stylesheet" />
    <link href="css\estilo.css" rel="stylesheet" />
    <title>Document</title>
</head>

<body>

    <header class="header">
        <div class="logo">

            <a href="ondeTudoComecou.html">
              <img src="assets\Cat icon.png" style="width:80px; height: 80px">
            </a>
        </div>
        <div class="containerOpções">
            <li>
                <a class="a2" href="index.html">Home</a>
            </li>
            <li>
                <a class="a2" href="quemSomos.html">Quem Somos</a>
            </li>
            <li>
                <a class="a2" href="dicas.html">Dicas</a>
            </li>
         
            <div class="containerOpções2">
                <a class="a2" href="cadastro.html" style="color: #8F149A;">
                    Cadastro
                </a>
                <a class="a2 " href="login.html">
                    <img src="assets\perfil.png" style="width: 30px; height: 30px">
                </a>
            </div>
        </div>
    </header>

    <div class="container">
        <h2>Cadastre um gato</h2>
        <br>

        <form id="adoptionForm">
            <label for="nomeGato">Nome do Gato:</label>
            <br>
            <input type="text" id="nomeGato" name="nomeGato" required>

            <br><br>

            <label for="idadeGato">Idade do Gato:</label>
            <br>
            <input type="number" id="idadeGato" name="idadeGato" required>

            <br><br>

            <label for="caractP">Escolha a característica principal</label>
            <br>
            <select id="caractP" name="doencas">
                <option value="docil">Dócil</option>
                <option value="aventureiro">Aventureiro</option>
                <option value="carinhoso">Carinhoso</option>
                <option value="amigavel">Amigável</option>
            </select>

            <br><br>

            <label for="raca">Raça:</label>
            <br>
            <input type="text" id="raca" name="raca">

            <br><br>

            <label for="cor">Cor:</label>
            <br>
            <input type="text" id="cor" name="cor">

            <br><br>

            <label for="doencas">Possui doenças?</label>
            <br>
            <select id="doencas" name="doencas">
                <option value="sim">Sim</option>
                <option value="nao">Não</option>
            </select>

            <br><br>

            <label for="quaisDoencas">Quais doenças?</label>
            <br>
            <input type="text" id="quaisDoencas" name="quaisDoencas">

            <br><br>

            <label for="vacinado">Vacinado?</label>
            <br>
            <select id="vacinado" name="vacinado">
                <option value="sim">Sim</option>
                <option value="nao">Não</option>
            </select>

            <br><br>
            <label for="sexoGato">Sexo do Gato:?</label>
            <br>
            <select id="sexoGato" name="sexoGato">
                <option value="macho">Macho</option>
                <option value="femea">Fêmea</option>
            </select>

            <br><br>

            <label for="castrado">Esterilizado/ Castrado:</label>
            <br>
            <select id="castrado" name="castrado">
                <option value="sim">Sim</option>
                <option value="nao">Não</option>
            </select>

            <br><br>

            <label for="historiaGato">História do Gato:</label>
            <br>
            <textarea id="historiaGato" name="historiaGato" rows="4" required></textarea>

            <br><br>

            <label for="nivelAtividade">Nível de Atividade:</label>
            <br>
            <select id="nivelAtividade" name="nivelAtividade">
                <option value="baixo">Baixo</option>
                <option value="medio">Médio</option>
                <option value="alto">Alto</option>
            </select>

            <br><br>

            <label for="necessidadesEspeciais">Necessidades Especiais:</label>
            <br>
            <textarea id="necessidadesEspeciais" name="necessidadesEspeciais" rows="4"></textarea>

            <br><br>

            <label for="relacaoComOutrosAnimais">Relação com Outros Animais:</label>
            <br>
            <textarea id="relacaoComOutrosAnimais" name="relacaoComOutrosAnimais" rows="4"></textarea>

            <br><br>

            <label for="ambientePreferido">Ambiente Preferido:</label>
            <br>
            <textarea id="ambientePreferido" name="ambientePreferido" rows="4"></textarea>

            <br><br>

            <label for="fotoGato">Fotos do Gato:</label>
            <br>
            <input type="file" id="fotoGato" name="fotoGato" accept="image/*">

            <br><br>

            <label for="nomeResponsavel">Nome do responsável pela adoção:</label>
            <br>
            <input type="text" id="nomeResponsavel" name="nomeResponsavel" required>

            <br><br>

            <label for="telefoneResponsavel">Número de telefone:</label>
            <br>
            <input type="tel" id="telefoneResponsavel" name="telefoneResponsavel" required>

            <br><br>

            <label for="emailResponsavel">E-mail de contato:</label>
            <br>
            <input type="email" id="emailResponsavel" name="emailResponsavel" required>

            <br><br>

            <label for="termosCondicoes">Termos e Condições pessoais (será avaliado em contato com o adotante):</label>
            <br>
            <textarea id="termosCondicoes" name="termosCondicoes" rows="4" required></textarea>

            <br><br>
            <div class="botaoFormAdocao">

                <button class="botao" type="button" onclick="cadastrar()">Enviar</button>

            </div>

        </form>

    </div>

    <footer>
        <div class="container2">
          <div class="containerItens">
            <div class="imagens">
    
              <a href="https://www.facebook.com/profile.php?id=61554143189765" target="_blank">
                <img src="assets\facebook.png" width="50px" height="50">
              </a>
    
              <a href="https://www.instagram.com/adoteumfelpudo/" target="_blank">
                <img src="assets\Instagram.png" width="50px" height="50">
              </a>
    
              <a href="https://twitter.com/adoteumfelpudo" target="_blank">
                <img src="assets\Twitter.png" width="50px" height="50">
              </a>
    
            </div>
            <div>
              <b>Fale conosco: AdoteUmFelpudo@gmail.com</b>
            </div>
          </div>
      </footer>
    
    </body>

<script>
    // function enviarFormulario() {
    //     // Obter os dados do formulário
    //     const formData = new FormData(document.getElementById('adoptionForm'));

    //     // Simular o envio para um servidor fictício
    //     fetch('/gato/cadastrar', {
    //         method: 'POST',
    //         body: formData
    //     })
    //         .then(response => response.json())
    //         .then(data => {
    //             console.log('Dados enviados com sucesso:', data);
    //             // Adicione aqui lógica adicional após o envio bem-sucedido
    //         })
    //         .catch(error => {
    //             console.error('Erro ao enviar dados:', error);
    //             // Adicione aqui lógica de tratamento de erros
    //         });
    // }

    // window.onload = listar()

    function listar() {
        fetch("/gato/listar").then(function (resposta) {

            resposta.json().then(function (resposta) {
                console.log("Dados recebidos: ", JSON.stringify(resposta));
            });

        }).catch(function (resposta) {
            console.error(resposta);
        });
    }

    function cadastrar() {
        // aguardar();

        //Recupere o valor da nova input pelo nome do id
        // Agora vá para o método fetch logo abaixo
        var nomeGatoVar = nomeGato.value;
        var idadeGatoVar = idadeGato.value;
        var caractPVar = caractP.value;
        var racaVar = raca.value;
        var corVar = cor.value;
        var possuiDoencasVar = doencas.value;
        var quaisDoencasVar = quaisDoencas.value;
        var vacinadoVar = vacinado.value;
        var sexoGatoVar = sexoGato.value;
        var castradoVar = castrado.value;
        var historiaDoGatoVar = historiaGato.value;
        var nivelAtividadeVar = nivelAtividade.value;
        var necessidadesEspeciaisVar = necessidadesEspeciais.value;
        var relacaoComOutrosAnimaisVar = relacaoComOutrosAnimais.value;
        var ambientePreferidoVar = ambientePreferido.value;
        // var fotoGatoVar = fotoGato.value;
        var telefoneResponsavelVar = telefoneResponsavel.value;
        var emailResponsavelVar = emailResponsavel.value;
        var termosCondVar = termosCondicoes.value;

        if (
            nomeGatoVar == "" ||
            idadeGatoVar == "" ||
            caractPVar == "" ||
            racaVar == "" ||
            corVar == "" ||
            possuiDoencasVar == "" ||
            quaisDoencasVar == "" ||
            vacinadoVar == "" ||
            sexoGatoVar == "" ||
            castradoVar == "" ||
            historiaDoGatoVar == "" ||
            nivelAtividadeVar == "" ||
            necessidadesEspeciaisVar == "" ||
            relacaoComOutrosAnimaisVar == "" ||
            ambientePreferidoVar == "" ||
            // // fotoGatoVar == "" ||
            telefoneResponsavelVar == "" ||
            emailResponsavelVar == "" ||
            termosCondVar == ""
        ) {
            // cardErro.style.display = "block";
            // mensagem_erro.innerHTML =
            //   "(Mensagem de erro para todos os campos em branco)";

            //   finalizarAguardar();
            return false;
        }
        // } else {
        //   setInterval(sumirMensagem, 5000);
        // }

        // Enviando o valor da nova input
        fetch("/gato/cadastrarGato", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                // crie um atributo que recebe o valor recuperado aqui
                // Agora vá para o arquivo routes/usuario.js
                nomeGatoServer: nomeGatoVar,
                idadeGatoServer: idadeGatoVar,
                caractPServer: caractPVar,
                racaServer: racaVar,
                corServer: corVar,
                doencasServer: possuiDoencasVar,
                quaisDoencasServer: quaisDoencasVar,
                vacinadoServer: vacinadoVar,
                sexoGatoServer: sexoGatoVar,
                castradoServer: castradoVar,
                historiaDoGatoServer: historiaDoGatoVar,
                nivelAtividadeServer: nivelAtividadeVar,
                necessidadesEspeciaisServer: necessidadesEspeciaisVar,
                relacaoComOutrosAnimaisServer: relacaoComOutrosAnimaisVar,
                ambientePreferidoServer: ambientePreferidoVar,
                // // fotoGatoServer: fotoGatoVar,
                telefoneResponsavelServer: telefoneResponsavelVar,
                emailResponsavelServer: emailResponsavelVar,
                termosCondicoesServer: termosCondVar
            }),
        })
            .then(function (resposta) {
                console.log("resposta: ", resposta);

                if (resposta.ok) {
                    //   cardErro.style.display = "block";

                    //   mensagem_erro.innerHTML =
                    //     "Cadastro realizado com sucesso! Redirecionando para tela de Login...";

                    setTimeout(() => {
                        window.location = "telaAdoção.html";
                    }, "2000");

                    // limparFormulario();
                    // finalizarAguardar();
                } else {
                    throw "Houve um erro ao tentar realizar o cadastro!";
                }
            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
                // finalizarAguardar();
            });

        return false;
    }
</script>

</html>